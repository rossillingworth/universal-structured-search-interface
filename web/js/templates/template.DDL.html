
<!--
TODO: get _ template to accept SCRIPT tags, and <%= %>
-->

<script>
    var childrenContainerId = "ddl_" + uuid;
    var funcNameDDLChanged = namedAnonymousFunction(function(){
        // remove all old descendants
        var container = JS.DOM.getElement(childrenContainerId);
        container.innerHTML = "";
        // get selected value
        var selectedValue = JS.DOM.FORM.getValue(this);
        // populate new child
        var childDataTag = dataTag.children.namedItem(selectedValue);
        tlf.populate(level+1,container,childDataTag)
    });
</script>
<div class="" style="display: inline-block;border:1px solid red;">
    <input type="hidden" id="level<%=level%>" name="level<%=level%>" value="">
    <label><%=dataTag.getAttribute("label")%></label><br/>
    <select onchange="window['<%=funcNameDDLChanged%>'].apply(this);">
        <option value="<%=dataTag.getAttribute('label')%>"><%=dataTag.getAttribute("label")%></option>
        <% _.forEach(dataTag.children,function(val,key,collection){%>
        <option value="<%=val.getAttribute('id')%>"><%=val.getAttribute("label")%></option>
        <%});%>
    </select>
</div>
<span id="<%=childrenContainerId%>"></span>
